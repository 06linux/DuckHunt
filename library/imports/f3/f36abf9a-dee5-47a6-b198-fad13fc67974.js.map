{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/uiResult.js"],"names":["uiPanel","require","mvs","GLB","cc","Class","extends","properties","winAudio","default","url","AudioClip","loseAudio","onLoad","_super","player1","nodeDict","getComponent","node","active","player2","player3","on","quit","setData","data","length","userInfo","id","audioEngine","play","Game","GameManager","loginServer","engine","leaveRoom","gamePanel","uiFunc","findUI","closeUI","destroy","name","lobbyShow"],"mappings":";;;;;;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,MAAMD,QAAQ,SAAR,CAAV;AACA,IAAIE,MAAMF,QAAQ,KAAR,CAAV;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASN,OADJ;;AAGLO,gBAAY;AACRC,kBAAU;AACNC,qBAAS,IADH;AAENC,iBAAKN,GAAGO;AAFF,SADF;;AAMRC,mBAAW;AACPH,qBAAS,IADF;AAEPC,iBAAKN,GAAGO;AAFD;AANH,KAHP;;AAeLE,UAfK,oBAeI;AACL,aAAKC,MAAL;;AAEA,aAAKC,OAAL,GAAe,KAAKC,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKF,OAAL,CAAaG,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKC,OAAL,GAAe,KAAKJ,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKG,OAAL,CAAaF,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKE,OAAL,GAAe,KAAKL,QAAL,CAAc,SAAd,EAAyBC,YAAzB,CAAsC,kBAAtC,CAAf;AACA,aAAKI,OAAL,CAAaH,IAAb,CAAkBC,MAAlB,GAA2B,KAA3B;AACA,aAAKH,QAAL,CAAc,MAAd,EAAsBM,EAAtB,CAAyB,OAAzB,EAAkC,KAAKC,IAAvC,EAA6C,IAA7C;AACH,KAzBI;;;AA2BLC,aAAS,iBAASC,IAAT,EAAe;AACpB,YAAIA,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,iBAAKX,OAAL,CAAaS,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,iBAAKV,OAAL,CAAaG,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACA,gBAAIM,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,qBAAKN,OAAL,CAAaI,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,qBAAKL,OAAL,CAAaF,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACH;AACD,gBAAIM,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACjB,qBAAKL,OAAL,CAAaG,OAAb,CAAqBC,KAAK,CAAL,CAArB;AACA,qBAAKJ,OAAL,CAAaH,IAAb,CAAkBC,MAAlB,GAA2B,IAA3B;AACH;AACJ;;AAED,YAAIM,KAAK,CAAL,MAAYtB,IAAIwB,QAAJ,CAAaC,EAA7B,EAAiC;AAC7BxB,eAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKtB,QAAzB,EAAmC,KAAnC,EAA0C,CAA1C;AACA;AACAuB,iBAAKC,WAAL,CAAiBC,WAAjB;AACH,SAJD,MAIO;AACH7B,eAAGyB,WAAH,CAAeC,IAAf,CAAoB,KAAKlB,SAAzB,EAAoC,KAApC,EAA2C,CAA3C;AACH;AACJ,KAhDI;;AAmDLW,UAAM,gBAAW;AACbrB,YAAIgC,MAAJ,CAAWC,SAAX,CAAqB,EAArB;AACA,YAAIC,YAAYC,OAAOC,MAAP,CAAc,aAAd,CAAhB;AACA,YAAIF,SAAJ,EAAe;AACXC,mBAAOE,OAAP,CAAe,aAAf;AACAH,sBAAUI,OAAV;AACH;AACDH,eAAOE,OAAP,CAAe,KAAKrB,IAAL,CAAUuB,IAAzB;AACA,aAAKvB,IAAL,CAAUsB,OAAV;;AAGAT,aAAKC,WAAL,CAAiBU,SAAjB;AACH;AA/DI,CAAT","file":"uiResult.js","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var uiPanel = require(\"uiPanel\");\nvar mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\ncc.Class({\n    extends: uiPanel,\n\n    properties: {\n        winAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n\n        loseAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n    },\n\n    onLoad() {\n        this._super();\n\n        this.player1 = this.nodeDict[\"player1\"].getComponent(\"resultPlayerIcon\");\n        this.player1.node.active = false;\n        this.player2 = this.nodeDict[\"player2\"].getComponent(\"resultPlayerIcon\");\n        this.player2.node.active = false;\n        this.player3 = this.nodeDict[\"player3\"].getComponent(\"resultPlayerIcon\");\n        this.player3.node.active = false;\n        this.nodeDict[\"quit\"].on(\"click\", this.quit, this);\n    },\n\n    setData: function(data) {\n        if (data.length > 0) {\n            this.player1.setData(data[0]);\n            this.player1.node.active = true;\n            if (data.length > 1) {\n                this.player2.setData(data[1]);\n                this.player2.node.active = true;\n            }\n            if (data.length > 2) {\n                this.player3.setData(data[2]);\n                this.player3.node.active = true;\n            }\n        }\n\n        if (data[0] === GLB.userInfo.id) {\n            cc.audioEngine.play(this.winAudio, false, 1);\n            // 发送胜局记录--\n            Game.GameManager.loginServer();\n        } else {\n            cc.audioEngine.play(this.loseAudio, false, 1);\n        }\n    },\n\n\n    quit: function() {\n        mvs.engine.leaveRoom(\"\");\n        var gamePanel = uiFunc.findUI(\"uiGamePanel\");\n        if (gamePanel) {\n            uiFunc.closeUI(\"uiGamePanel\");\n            gamePanel.destroy();\n        }\n        uiFunc.closeUI(this.node.name);\n        this.node.destroy();\n\n\n        Game.GameManager.lobbyShow();\n    }\n});\n"]}