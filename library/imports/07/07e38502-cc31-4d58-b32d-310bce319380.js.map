{"version":3,"sources":["../../../../../assets/game/script/assets/game/script/bulletManager.js"],"names":["mvs","require","GLB","cc","Class","extends","Component","properties","smallBulletPrefab","default","type","Prefab","bigBulletPrefab","onLoad","Game","BulletManager","smallBulletCnt","smallBulletPool","NodePool","bigBulletPool","loadBullet","spawnSmallBullet","host","pos","temp","get","instantiate","bulletComponent","getComponent","initData","spawnBigBullet","recycleBullet","bullet","bType","BulletType","Normal","put","node"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,KAAR,CAAV;AACAE,GAAGC,KAAH,CAAS;;AAELC,aAASF,GAAGG,SAFP;AAGLC,gBAAY;AACRC,2BAAmB;AACfC,qBAAS,IADM;AAEfC,kBAAMP,GAAGQ;AAFM,SADX;AAKRC,yBAAiB;AACbH,qBAAS,IADI;AAEbC,kBAAMP,GAAGQ;AAFI;AALT,KAHP;;AAeLE,UAfK,oBAeI;AACLC,aAAKC,aAAL,GAAqB,IAArB;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA;AACA,aAAKC,eAAL,GAAuB,IAAId,GAAGe,QAAP,EAAvB;AACA,aAAKC,aAAL,GAAqB,IAAIhB,GAAGe,QAAP,EAArB;AAEH,KAtBI;;;AAwBLE,gBAAY,sBAAW;AACnB,aAAKJ,cAAL,GAAsB,EAAtB;AACH,KA1BI;;AA4BLK,sBAAkB,0BAASC,IAAT,EAAeC,GAAf,EAAoB;AAClC,YAAIC,OAAO,KAAKP,eAAL,CAAqBQ,GAArB,EAAX;AACA,YAAI,CAACD,IAAL,EAAW;AACPA,mBAAOrB,GAAGuB,WAAH,CAAe,KAAKlB,iBAApB,CAAP;AACH;AACD,YAAImB,kBAAkBH,KAAKI,YAAL,CAAkB,QAAlB,CAAtB;AACA,YAAID,eAAJ,EAAqB;AACjBA,4BAAgBE,QAAhB,CAAyBP,IAAzB,EAA+BC,GAA/B;AACH;AACJ,KArCI;;AAuCLO,oBAAgB,wBAASR,IAAT,EAAeC,GAAf,EAAoB;AAChC,YAAIC,OAAO,KAAKL,aAAL,CAAmBM,GAAnB,EAAX;AACA,YAAI,CAACD,IAAL,EAAW;AACPA,mBAAOrB,GAAGuB,WAAH,CAAe,KAAKd,eAApB,CAAP;AACH;AACD,YAAIe,kBAAkBH,KAAKI,YAAL,CAAkB,QAAlB,CAAtB;AACA,YAAID,eAAJ,EAAqB;AACjBA,4BAAgBE,QAAhB,CAAyBP,IAAzB,EAA+BC,GAA/B;AACH;AACJ,KAhDI;;AAkDLQ,mBAAe,uBAASC,MAAT,EAAiB;AAC5B,YAAIA,OAAOC,KAAP,KAAiBC,WAAWC,MAAhC,EAAwC;AACpC,iBAAKlB,eAAL,CAAqBmB,GAArB,CAAyBJ,OAAOK,IAAhC;AACH,SAFD,MAEO;AACH,iBAAKlB,aAAL,CAAmBiB,GAAnB,CAAuBJ,OAAOK,IAA9B;AACH;AACJ;AAxDI,CAAT","file":"bulletManager.js","sourceRoot":"../../../../../assets/game/script","sourcesContent":["var mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\ncc.Class({\n\n    extends: cc.Component,\n    properties: {\n        smallBulletPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        bigBulletPrefab: {\n            default: null,\n            type: cc.Prefab\n        }\n    },\n\n\n    onLoad() {\n        Game.BulletManager = this;\n        this.smallBulletCnt = 10;\n        // 子弹池--\n        this.smallBulletPool = new cc.NodePool();\n        this.bigBulletPool = new cc.NodePool();\n\n    },\n\n    loadBullet: function() {\n        this.smallBulletCnt = 10;\n    },\n\n    spawnSmallBullet: function(host, pos) {\n        var temp = this.smallBulletPool.get()\n        if (!temp) {\n            temp = cc.instantiate(this.smallBulletPrefab);\n        }\n        var bulletComponent = temp.getComponent(\"bullet\");\n        if (bulletComponent) {\n            bulletComponent.initData(host, pos);\n        }\n    },\n\n    spawnBigBullet: function(host, pos) {\n        var temp = this.bigBulletPool.get()\n        if (!temp) {\n            temp = cc.instantiate(this.bigBulletPrefab);\n        }\n        var bulletComponent = temp.getComponent(\"bullet\");\n        if (bulletComponent) {\n            bulletComponent.initData(host, pos);\n        }\n    },\n\n    recycleBullet: function(bullet) {\n        if (bullet.bType === BulletType.Normal) {\n            this.smallBulletPool.put(bullet.node);\n        } else {\n            this.bigBulletPool.put(bullet.node);\n        }\n    },\n});\n"]}