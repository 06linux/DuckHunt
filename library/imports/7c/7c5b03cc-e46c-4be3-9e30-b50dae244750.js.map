{"version":3,"sources":["../../../../../assets/common/lobby/assets/common/lobby/playerIcon.js"],"names":["cc","Class","extends","Component","properties","playerSprite","default","type","Sprite","setData","userInfo","playerId","id","userId","node","active","Game","GameManager","userInfoReq","init","clientEvent","on","eventType","playerAccountGet","userInfoSet","recvMsg","account","headIcon","loader","load","url","err","texture","spriteFrame","SpriteFrame","Rect","width","height","bind","start","onDestroy","off"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc;AACVC,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ;AAFC;AADN,KAHP;AASLC,aAAS,iBAASC,QAAT,EAAmB;AACxB,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKC,QAAL,GAAgBD,SAASE,EAAT,GAAcF,SAASE,EAAvB,GAA4BF,SAASG,MAArD;AACA,aAAKR,YAAL,CAAkBS,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;AACAC,aAAKC,WAAL,CAAiBC,WAAjB,CAA6B,KAAKP,QAAlC;AACH,KAdI;;AAgBLQ,UAAM,gBAAW;AACb,aAAKT,QAAL,GAAgB,IAAhB;AACA,aAAKL,YAAL,CAAkBS,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;AACAK,oBAAYC,EAAZ,CAAeD,YAAYE,SAAZ,CAAsBC,gBAArC,EAAuD,KAAKC,WAA5D,EAAyE,IAAzE;AACH,KApBI;;AAsBLA,iBAAa,qBAASC,OAAT,EAAkB;AAC3B,YAAIA,QAAQC,OAAR,IAAmB,KAAKf,QAA5B,EAAsC;AAClC,gBAAIc,QAAQE,QAAR,IAAoBF,QAAQE,QAAR,KAAqB,GAA7C,EAAkD;AAC9C3B,mBAAG4B,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAKL,QAAQE,QAAd,EAAwBpB,MAAM,KAA9B,EAAf,EAAqD,UAASwB,GAAT,EAAcC,OAAd,EAAuB;AACxE,wBAAIC,cAAc,IAAIjC,GAAGkC,WAAP,CAAmBF,OAAnB,EAA4BhC,GAAGmC,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAcH,QAAQI,KAAtB,EAA6BJ,QAAQK,MAArC,CAA5B,CAAlB;AACA,wBAAG,KAAKhC,YAAR,EAAsB;AAClB,6BAAKA,YAAL,CAAkB4B,WAAlB,GAAgCA,WAAhC;AACH;AACJ,iBALoD,CAKnDK,IALmD,CAK9C,IAL8C,CAArD;AAMH;AACJ;AACJ,KAjCI;;AAmCLC,SAnCK,mBAmCG;AACJ,aAAKpB,IAAL;AACH,KArCI;AAuCLqB,aAvCK,uBAuCO;AACRpB,oBAAYqB,GAAZ,CAAgBrB,YAAYE,SAAZ,CAAsBC,gBAAtC,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH;AAzCI,CAAT","file":"playerIcon.js","sourceRoot":"../../../../../assets/common/lobby","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        playerSprite: {\n            default: null,\n            type: cc.Sprite\n        }\n    },\n    setData: function(userInfo) {\n        this.userInfo = userInfo;\n        this.playerId = userInfo.id ? userInfo.id : userInfo.userId;\n        this.playerSprite.node.active = true;\n        Game.GameManager.userInfoReq(this.playerId);\n    },\n\n    init: function() {\n        this.userInfo = null;\n        this.playerSprite.node.active = false;\n        clientEvent.on(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n    },\n\n    userInfoSet: function(recvMsg) {\n        if (recvMsg.account == this.playerId) {\n            if (recvMsg.headIcon && recvMsg.headIcon !== \"-\") {\n                cc.loader.load({url: recvMsg.headIcon, type: 'png'}, function(err, texture) {\n                    var spriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\n                    if(this.playerSprite) {\n                        this.playerSprite.spriteFrame = spriteFrame;\n                    }\n                }.bind(this));\n            }\n        }\n    },\n\n    start() {\n        this.init();\n    },\n\n    onDestroy() {\n        clientEvent.off(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n    }\n});\n"]}