{"version":3,"sources":["playerManager.js"],"names":["mvs","require","GLB","cc","Class","extends","Component","properties","playerNodes","Node","scoreLbs","onLoad","Game","PlayerManager","players","clientEvent","on","eventType","gameStart","initPlayers","uiGamePanel","uiFunc","findUI","i","length","player","playerUserIds","playerScript","getComponent","init","push","active","getPlayerByUserId","userId","onDestroy","off"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,KAAR,CAAV;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,CAACL,GAAGM,IAAJ,CADL;AAERC,kBAAU,CAACP,GAAGM,IAAJ;AAFF,KAHP;;AAQLE,UARK,oBAQI;AACLC,aAAKC,aAAL,GAAqB,IAArB;AACA,aAAKC,OAAL,GAAe,EAAf;AACAC,oBAAYC,EAAZ,CAAeD,YAAYE,SAAZ,CAAsBC,SAArC,EAAgD,KAAKC,WAArD,EAAkE,IAAlE;AACH,KAZI;;;AAcL;AACAA,iBAAa,uBAAW;AACpB,YAAIC,cAAcC,OAAOC,MAAP,CAAc,aAAd,CAAlB;AACA,YAAI,CAACF,WAAL,EAAkB;AACd;AACH;;AAED,aAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAI,KAAKf,WAAL,CAAiBgB,MAArC,EAA6CD,GAA7C,EAAkD;AAC9C,gBAAIE,SAAS,KAAKjB,WAAL,CAAiBe,CAAjB,CAAb;AACA,gBAAGrB,IAAIwB,aAAJ,CAAkBF,MAAlB,GAA2BD,CAA9B,EAAiC;AAC7B,oBAAII,eAAeF,OAAOG,YAAP,CAAoB,QAApB,CAAnB;AACA,oBAAID,YAAJ,EAAkB;AACdA,iCAAaE,IAAb,CAAkB3B,IAAIwB,aAAJ,CAAkBH,CAAlB,CAAlB;AACH;AACD,qBAAKT,OAAL,CAAagB,IAAb,CAAkBL,MAAlB;AACA,qBAAKf,QAAL,CAAca,CAAd,EAAiBQ,MAAjB,GAA0B,IAA1B;AACH,aAPD,MAOK;AACDN,uBAAOM,MAAP,GAAgB,KAAhB;AACA,qBAAKrB,QAAL,CAAca,CAAd,EAAiBQ,MAAjB,GAA0B,KAA1B;AACH;AACJ;AACJ,KAnCI;;AAqCLC,uBAAmB,2BAASC,MAAT,EAAiB;AAChC,aAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAIrB,IAAIwB,aAAJ,CAAkBF,MAAtC,EAA8CD,GAA9C,EAAmD;AAC/C,gBAAIrB,IAAIwB,aAAJ,CAAkBH,CAAlB,MAAyBU,MAAzB,IAAmC,KAAKnB,OAAxC,IAAmD,KAAKA,OAAL,CAAaS,CAAb,CAAvD,EAAwE;AACpE,uBAAO,KAAKT,OAAL,CAAaS,CAAb,EAAgBK,YAAhB,CAA6B,QAA7B,CAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KA5CI;;AA8CLM,eAAW,qBAAW;AAClBnB,oBAAYoB,GAAZ,CAAgBpB,YAAYE,SAAZ,CAAsBC,SAAtC,EAAiD,KAAKC,WAAtD,EAAmE,IAAnE;AACH;AAhDI,CAAT","file":"playerManager.js","sourceRoot":"../../../../../assets/game/script","sourcesContent":["var mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        playerNodes: [cc.Node],\n        scoreLbs: [cc.Node],\n    },\n\n    onLoad() {\n        Game.PlayerManager = this;\n        this.players = [];\n        clientEvent.on(clientEvent.eventType.gameStart, this.initPlayers, this);\n    },\n\n    // 初始化玩家--\n    initPlayers: function() {\n        var uiGamePanel = uiFunc.findUI(\"uiGamePanel\");\n        if (!uiGamePanel) {\n            return;\n        }\n\n        for (var i = 0; i < this.playerNodes.length; i++) {\n            var player = this.playerNodes[i];\n            if(GLB.playerUserIds.length > i) {\n                var playerScript = player.getComponent(\"player\");\n                if (playerScript) {\n                    playerScript.init(GLB.playerUserIds[i]);\n                }\n                this.players.push(player);\n                this.scoreLbs[i].active = true;\n            }else{\n                player.active = false;\n                this.scoreLbs[i].active = false;\n            }\n        }\n    },\n\n    getPlayerByUserId: function(userId) {\n        for (var i = 0; i < GLB.playerUserIds.length; i++) {\n            if (GLB.playerUserIds[i] === userId && this.players && this.players[i]) {\n                return this.players[i].getComponent(\"player\");\n            }\n        }\n        return null;\n    },\n\n    onDestroy: function() {\n        clientEvent.off(clientEvent.eventType.gameStart, this.initPlayers, this);\n    }\n});\n"]}