{"version":3,"sources":["resultPlayerIcon.js"],"names":["cc","Class","extends","Component","properties","icon","default","type","Sprite","nameLb","Label","scoreLb","setData","id","playerId","string","player","Game","PlayerManager","getPlayerByUserId","score","clientEvent","on","eventType","playerAccountGet","userInfoSet","GameManager","userInfoReq","recvMsg","account","userName","headIcon","indexOf","loader","load","url","err","texture","spriteFrame","SpriteFrame","Rect","width","height","bind","onDestroy","off"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAM;AACFC,qBAAS,IADP;AAEFC,kBAAMP,GAAGQ;AAFP,SADE;;AAMRC,gBAAQ;AACJH,qBAAS,IADL;AAEJC,kBAAMP,GAAGU;AAFL,SANA;AAURC,iBAAS;AACLL,qBAAS,IADJ;AAELC,kBAAMP,GAAGU;AAFJ;AAVD,KAHP;;AAmBLE,aAAS,iBAASC,EAAT,EAAa;AAClB,aAAKC,QAAL,GAAgBD,EAAhB;AACA,aAAKJ,MAAL,CAAYM,MAAZ,GAAqB,KAAKD,QAA1B;AACA,YAAIE,SAASC,KAAKC,aAAL,CAAmBC,iBAAnB,CAAqC,KAAKL,QAA1C,CAAb;AACA,aAAKH,OAAL,CAAaI,MAAb,GAAsBC,OAAOI,KAA7B;;AAEAC,oBAAYC,EAAZ,CAAeD,YAAYE,SAAZ,CAAsBC,gBAArC,EAAuD,KAAKC,WAA5D,EAAyE,IAAzE;AACAR,aAAKS,WAAL,CAAiBC,WAAjB,CAA6B,KAAKb,QAAlC;AACH,KA3BI;;AA6BLW,iBAAa,qBAASG,OAAT,EAAkB;AAC3B,YAAIA,QAAQC,OAAR,IAAmB,KAAKf,QAA5B,EAAsC;AAClC,iBAAKL,MAAL,CAAYM,MAAZ,GAAqBa,QAAQE,QAA7B;AACA,gBAAIF,QAAQG,QAAR,IAAoBH,QAAQG,QAAR,CAAiBC,OAAjB,CAAyB,MAAzB,KAAoC,CAA5D,EAA+D;AAC3DhC,mBAAGiC,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAKP,QAAQG,QAAd,EAAwBxB,MAAM,KAA9B,EAAf,EAAqD,UAAS6B,GAAT,EAAcC,OAAd,EAAuB;AACxE,wBAAIC,cAAc,IAAItC,GAAGuC,WAAP,CAAmBF,OAAnB,EAA4BrC,GAAGwC,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAcH,QAAQI,KAAtB,EAA6BJ,QAAQK,MAArC,CAA5B,CAAlB;AACA,yBAAKrC,IAAL,CAAUiC,WAAV,GAAwBA,WAAxB;AACH,iBAHoD,CAGnDK,IAHmD,CAG9C,IAH8C,CAArD;AAIH;AACJ;AACJ,KAvCI;;AAyCLC,aAzCK,uBAyCO;AACRvB,oBAAYwB,GAAZ,CAAgBxB,YAAYE,SAAZ,CAAsBC,gBAAtC,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH;AA3CI,CAAT","file":"resultPlayerIcon.js","sourceRoot":"../../../../../assets/common/lobby","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        icon: {\n            default: null,\n            type: cc.Sprite\n        },\n\n        nameLb: {\n            default: null,\n            type: cc.Label\n        },\n        scoreLb: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    setData: function(id) {\n        this.playerId = id;\n        this.nameLb.string = this.playerId;\n        var player = Game.PlayerManager.getPlayerByUserId(this.playerId);\n        this.scoreLb.string = player.score;\n\n        clientEvent.on(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n        Game.GameManager.userInfoReq(this.playerId);\n    },\n\n    userInfoSet: function(recvMsg) {\n        if (recvMsg.account == this.playerId) {\n            this.nameLb.string = recvMsg.userName;\n            if (recvMsg.headIcon && recvMsg.headIcon.indexOf(\"http\") >= 0) {\n                cc.loader.load({url: recvMsg.headIcon, type: 'png'}, function(err, texture) {\n                    var spriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\n                    this.icon.spriteFrame = spriteFrame;\n                }.bind(this));\n            }\n        }\n    },\n\n    onDestroy() {\n        clientEvent.off(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\n    },\n\n});\n"]}